<!--==================== POPUP-FORM ====================-->
<section class="popup section" #popup>
  <span class="overlay" #overlay></span>
  <div class="container">

    <div class="heading">
      <h2>Варіанти проходження:</h2>
    </div>

    <div class="results-warp">
      <div *ngIf="!loading; else loader">

        <div class="collection" *ngIf="possibleResults.length !== 0; else empty">
          <div *ngFor="let possibleResult of possibleResults; index as i" class="possible-result-component show-modal"
               (click)="openModal(possibleResult)">

            <p>
              {{ i + 1 }}. {{ possibleResult.name }}
            </p>

            <button type="button" class="delete-btn"
                    (click)="onDeletePossibleResult($event, possibleResult)">
              <i class='bx bx-trash'>

              </i></button>

          </div>
        </div>

        <ng-template #empty>
          <div>
            Немає можливих результатів
          </div>
        </ng-template>


      </div>
      <ng-template #loader>
        <i class='bx bx-loader-alt bx-spin' ></i>
      </ng-template>

      <div class="possible-result-component-add show-modal" (click)="onAddPosition()">
        <i class='bx bx-list-plus'></i>
      </div>
    </div>

  </div>


  <div class="modal-box">
    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="possible-result-form">

      <div class="name input-warp">
        <input
          formControlName="name"
          type="text"
          class="input-field"
          placeholder=" "
          [ngClass]="{'invalid': form.get('name')?.invalid && form.get('name')?.touched}"
        />
        <label>Назва</label>
        <div *ngIf="form.get('name')?.errors?.['required'] && form.get('name')?.touched" class="error-message">Поле
          обов'язкове для заповнення
        </div>
      </div>

      <div class="description input-warp">
    <textarea formControlName="description"
              class="input-field"
              placeholder=" "
              [ngClass]="{'invalid' : form.get('description')?.invalid && form.get('description')?.touched}">
    </textarea>
        <label>Опис</label>
        <div *ngIf="form.get('description')?.errors?.['required'] && form.get('description')?.touched"
             class="error-message-description">Поле обов'язкове для заповнення
        </div>
      </div>

      <div class="image-preview">
        <img [src]="apiUrl + imagePreview" *ngIf="imagePreview">
      </div>

      <div class="image input-warp">
        <input type="file" accept="image/*" class="image-input" (change)="onFileUpload($event)" #imageInput>
        <button type="button" (click)="triggerClick()" class="imageBtn" [disabled]="form.disabled">Додати
          картинку
        </button>
      </div>

      <div class="buttons">
        <button type="submit" class="close-btn" [disabled]="form.disabled">Додати варіант проходження</button>
      </div>
    </form>

  </div>

</section>
